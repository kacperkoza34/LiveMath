{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pekus\\\\Desktop\\\\desktop\\\\liveMathDemoRedux\\\\client\\\\src\\\\components\\\\tasks\\\\AddTask\\\\OpenTask\\\\AddGroups.js\";\nimport React, { useState, useEffect } from 'react';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport { v4 as uuidv4 } from 'uuid';\nimport { connect } from 'react-redux';\nimport { addGroup } from '../../../../redux/actions/newTask';\n\nconst AddGroups = ({\n  variables,\n  content,\n  addGroup\n}) => {\n  useEffect(() => {\n    setGroup([]);\n  }, [variables, content]);\n  const mockVars = {};\n  variables.forEach(({\n    variable\n  }, index) => {\n    mockVars[variable] = '';\n  });\n  const [group, setGroup] = useState([]);\n\n  const addNewGroup = () => {\n    if (variables.length) {\n      setNoVarsError(false);\n      let allValuesAdded = false;\n      group.forEach((item, i) => {\n        allValuesAdded = variables.some(({\n          variable\n        }) => item[variable] == null);\n        if (item.answer == null) allValuesAdded = true;\n      });\n\n      if (!allValuesAdded) {\n        setNoValuesError(false);\n        setGroup([...group, {\n          id: uuidv4(),\n          answer: null,\n          ...mockVars\n        }]);\n      } else setNoValuesError(true);\n    } else setNoVarsError(true);\n  };\n\n  const addValues = (e, id, variable) => {\n    setNoValuesError(false);\n    setGroup([...group.map(subitem => {\n      if (id == subitem.id) return { ...subitem,\n        [variable]: e.target.value\n      };else return { ...subitem\n      };\n    })]);\n  };\n\n  const deleteItem = id => {\n    setGroup([...group.filter(removeItem => removeItem.id !== id)]);\n  };\n\n  const addGroupsToState = () => {\n    let allValuesAdded = false;\n    group.forEach((item, i) => {\n      allValuesAdded = variables.some(({\n        variable\n      }) => item[variable] == null);\n      if (item.answer == null) allValuesAdded = true;\n    });\n    if (!allValuesAdded) addGroup(group);else setNoValuesError(true);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, \"Dodaj grupy\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: e => addNewGroup(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, \"Dodaj grup\\u0119\"), noVars && /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  }, \"Nie podano zmiennych\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, group.length > 0 && group.map((item, index) => /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, `Grupa ${index + 1}`), variables.map(({\n    variable\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 16\n    }\n  }, variable, ' = ', /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => addValues(e, item.id, variable),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 18\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Odpowiedz\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => addValues(e, item.id, 'answer'),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => deleteItem(item.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"Delete\")))), noValues && /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 20\n    }\n  }, \"Uzupe\\u0142nij wszystkie warto\\u015Bci w grupach\"), group.length > 0 && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => addGroupsToState(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 28\n    }\n  }, \"Potwierd\\u017A grupy\"));\n};\n\nconst mapStateToProps = state => ({\n  variables: state.newTask.data.variables,\n  content: state.newTask.data.content\n});\n\nexport default connect(mapStateToProps, {\n  addGroup\n})(AddGroups);","map":{"version":3,"sources":["C:/Users/pekus/Desktop/desktop/liveMathDemoRedux/client/src/components/tasks/AddTask/OpenTask/AddGroups.js"],"names":["React","useState","useEffect","TextareaAutosize","v4","uuidv4","connect","addGroup","AddGroups","variables","content","setGroup","mockVars","forEach","variable","index","group","addNewGroup","length","setNoVarsError","allValuesAdded","item","i","some","answer","setNoValuesError","id","addValues","e","map","subitem","target","value","deleteItem","filter","removeItem","addGroupsToState","noVars","noValues","mapStateToProps","state","newTask","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { connect } from 'react-redux';\r\nimport { addGroup } from '../../../../redux/actions/newTask';\r\n\r\nconst AddGroups = ({variables, content, addGroup}) => {\r\n  useEffect(()=>{\r\n    setGroup([]);\r\n  },[variables,content]);\r\n\r\n  const mockVars = {};\r\n\r\n  variables.forEach(({variable},index) => {\r\n    mockVars[variable] = '';\r\n  });\r\n\r\n  const [group, setGroup] = useState([]);\r\n\r\n\r\n  const addNewGroup = () => {\r\n    if(variables.length){\r\n      setNoVarsError(false);\r\n      let allValuesAdded = false;\r\n      group.forEach((item, i) => {\r\n        allValuesAdded = variables.some(({variable}) => item[variable] == null);\r\n        if(item.answer == null) allValuesAdded = true;\r\n      });\r\n\r\n      if(!allValuesAdded){\r\n        setNoValuesError(false);\r\n        setGroup(\r\n          [...group,\r\n            { id: uuidv4(),\r\n              answer: null,\r\n              ...mockVars\r\n            }\r\n          ]\r\n        );\r\n      }\r\n      else setNoValuesError(true);\r\n    }\r\n    else setNoVarsError(true);\r\n  };\r\n\r\n  const addValues = (e, id, variable) =>{\r\n    setNoValuesError(false);\r\n    setGroup([...group.map( subitem => {\r\n      if(id == subitem.id) return {...subitem, [variable]: e.target.value }\r\n      else return {...subitem}\r\n    })]);\r\n  }\r\n\r\n  const deleteItem = (id) =>{\r\n    setGroup([...group.filter(removeItem => removeItem.id !== id )]);\r\n  }\r\n  const addGroupsToState = () =>{\r\n    let allValuesAdded = false;\r\n    group.forEach((item, i) => {\r\n      allValuesAdded = variables.some(({variable}) => item[variable] == null);\r\n      if(item.answer == null) allValuesAdded = true;\r\n    });\r\n    if(!allValuesAdded) addGroup(group);\r\n    else setNoValuesError(true);\r\n  }\r\n  return(\r\n    <div>\r\n      <h3>Dodaj grupy</h3>\r\n      <button onClick={e => addNewGroup()}>Dodaj grupę</button>\r\n      { noVars && <h4>Nie podano zmiennych</h4>}\r\n      <ul>\r\n        { group.length > 0 && group.map( (item, index) => (\r\n          <li>\r\n            <div>{`Grupa ${index+1}`}</div>\r\n            {variables.map(({variable}) =>\r\n              (<div>{variable}{' = '}\r\n                 <input onChange={e => addValues(e,item.id, variable)} required></input>\r\n               </div>\r\n              )\r\n            )}\r\n            <div>Odpowiedz</div><input onChange={e => addValues(e,item.id, 'answer')} required></input>\r\n            <span onClick={() => deleteItem(item.id)}>Delete</span>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {noValues && <h4>Uzupełnij wszystkie wartości w grupach</h4>}\r\n      {group.length > 0 && <button onClick={()=>addGroupsToState()}>Potwierdź grupy</button>}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state =>({\r\n  variables: state.newTask.data.variables,\r\n  content: state.newTask.data.content\r\n})\r\n\r\nexport default connect(mapStateToProps,{addGroup})(AddGroups);\r\n"]},"metadata":{},"sourceType":"module"}