{"ast":null,"code":"import { apiRequest } from '../actions/apiRequest';\nimport { REGISTER_START, REGISTER_SUCCESS, loading } from '../actions/auth';\n\nconst register = ({\n  dispatch,\n  register\n}) => next => action => {\n  next(action);\n\n  if (action.type === REGISTER_START) {\n    const {\n      name,\n      email,\n      password,\n      params\n    } = action.payload;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    let url = '';\n\n    if (params.class) {\n      url = `/api/users/student/${params.teacher}/${params.class}`;\n    } else {\n      url = `/api/users/teacher/${params.teacher}`;\n    }\n\n    dispatch(loading());\n    dispatch(apiRequest('POST', url, null, null, {\n      name,\n      email,\n      password\n    }, config));\n  }\n\n  if (action.type === REGISTER_START) {\n    const {\n      name,\n      email,\n      password,\n      params\n    } = action.payload;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    let url = '';\n\n    if (params.class) {\n      url = `/api/users/student/${params.teacher}/${params.class}`;\n    } else {\n      url = `/api/users/teacher/${params.teacher}`;\n    }\n\n    dispatch(loading());\n    dispatch(apiRequest('POST', url, null, null, {\n      name,\n      email,\n      password\n    }, config));\n  }\n};\n\nexport default register;","map":{"version":3,"sources":["C:/Users/pekus/Desktop/desktop/liveMathDemoRedux/client/src/redux/middleware/auth.js"],"names":["apiRequest","REGISTER_START","REGISTER_SUCCESS","loading","register","dispatch","next","action","type","name","email","password","params","payload","config","headers","url","class","teacher"],"mappings":"AAAA,SAASA,UAAT,QAA2B,uBAA3B;AACA,SACEC,cADF,EAEEC,gBAFF,EAGEC,OAHF,QAIO,iBAJP;;AAOA,MAAMC,QAAQ,GAAG,CAAC;AAACC,EAAAA,QAAD;AAAWD,EAAAA;AAAX,CAAD,KAA0BE,IAAI,IAAIC,MAAM,IAAI;AAC3DD,EAAAA,IAAI,CAACC,MAAD,CAAJ;;AACA,MAAKA,MAAM,CAACC,IAAP,KAAgBP,cAArB,EAAuC;AACrC,UAAM;AAAEQ,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeC,MAAAA,QAAf;AAAyBC,MAAAA;AAAzB,QAAoCL,MAAM,CAACM,OAAjD;AAEA,UAAMC,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AACP,wBAAiB;AADV;AADI,KAAf;AAKA,QAAIC,GAAG,GAAG,EAAV;;AACA,QAAGJ,MAAM,CAACK,KAAV,EAAgB;AACbD,MAAAA,GAAG,GAAI,sBAAqBJ,MAAM,CAACM,OAAQ,IAAGN,MAAM,CAACK,KAAM,EAA3D;AACD,KAFF,MAEQ;AACLD,MAAAA,GAAG,GAAI,sBAAqBJ,MAAM,CAACM,OAAQ,EAA3C;AACD;;AACFb,IAAAA,QAAQ,CAACF,OAAO,EAAR,CAAR;AACAE,IAAAA,QAAQ,CAACL,UAAU,CAAC,MAAD,EAASgB,GAAT,EAAc,IAAd,EAAoB,IAApB,EAA0B;AAACP,MAAAA,IAAD;AAAOC,MAAAA,KAAP;AAAcC,MAAAA;AAAd,KAA1B,EAAmDG,MAAnD,CAAX,CAAR;AACD;;AAED,MAAKP,MAAM,CAACC,IAAP,KAAgBP,cAArB,EAAuC;AACrC,UAAM;AAAEQ,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeC,MAAAA,QAAf;AAAyBC,MAAAA;AAAzB,QAAoCL,MAAM,CAACM,OAAjD;AAEA,UAAMC,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AACP,wBAAiB;AADV;AADI,KAAf;AAKA,QAAIC,GAAG,GAAG,EAAV;;AACA,QAAGJ,MAAM,CAACK,KAAV,EAAgB;AACbD,MAAAA,GAAG,GAAI,sBAAqBJ,MAAM,CAACM,OAAQ,IAAGN,MAAM,CAACK,KAAM,EAA3D;AACD,KAFF,MAEQ;AACLD,MAAAA,GAAG,GAAI,sBAAqBJ,MAAM,CAACM,OAAQ,EAA3C;AACD;;AACFb,IAAAA,QAAQ,CAACF,OAAO,EAAR,CAAR;AACAE,IAAAA,QAAQ,CAACL,UAAU,CAAC,MAAD,EAASgB,GAAT,EAAc,IAAd,EAAoB,IAApB,EAA0B;AAACP,MAAAA,IAAD;AAAOC,MAAAA,KAAP;AAAcC,MAAAA;AAAd,KAA1B,EAAmDG,MAAnD,CAAX,CAAR;AACD;AACF,CArCD;;AAuCA,eAAeV,QAAf","sourcesContent":["import { apiRequest } from '../actions/apiRequest';\r\nimport {\r\n  REGISTER_START,\r\n  REGISTER_SUCCESS,\r\n  loading\r\n} from '../actions/auth';\r\n\r\n\r\nconst register = ({dispatch, register}) => next => action => {\r\n  next(action);\r\n  if ( action.type === REGISTER_START  ) {\r\n    const { name, email, password, params } = action.payload;\r\n\r\n    const config = {\r\n      headers: {\r\n        'Content-Type' : 'application/json'\r\n      }\r\n    }\r\n    let url = '';\r\n    if(params.class){\r\n       url = `/api/users/student/${params.teacher}/${params.class}`\r\n     } else {\r\n       url = `/api/users/teacher/${params.teacher}`\r\n     }\r\n    dispatch(loading());\r\n    dispatch(apiRequest('POST', url, null, null, {name, email, password}, config));\r\n  }\r\n\r\n  if ( action.type === REGISTER_START  ) {\r\n    const { name, email, password, params } = action.payload;\r\n\r\n    const config = {\r\n      headers: {\r\n        'Content-Type' : 'application/json'\r\n      }\r\n    }\r\n    let url = '';\r\n    if(params.class){\r\n       url = `/api/users/student/${params.teacher}/${params.class}`\r\n     } else {\r\n       url = `/api/users/teacher/${params.teacher}`\r\n     }\r\n    dispatch(loading());\r\n    dispatch(apiRequest('POST', url, null, null, {name, email, password}, config));\r\n  }\r\n};\r\n\r\nexport default register;\r\n"]},"metadata":{},"sourceType":"module"}